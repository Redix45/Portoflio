---
import BaseLayout from '../layouts/BaseLayout.astro';

const structuredData = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "@id": "https://jankobus.com",
  "name": "Fotografia Lubliniec - Jan Kobus",
  "alternateName": "Jan Kobus Fotografia",
  "description": "Profesjonalna fotografia Lubliniec - fotografia nieruchomości, fotografia eventowa i komercyjna",
  "url": "https://jankobus.com",
  "logo": "https://jankobus.com/favicon.jpg",
  "image": "https://jankobus.com/photos/operetka/foto (2).jpg",
  "priceRange": "$$",
  "telephone": "+48-XXX-XXX-XXX",
  "email": "kontakt@jankobus.com",
  "knowsAbout": ["Fotografia nieruchomości", "Fotografia eventowa", "Fotografia komercyjna", "Fotografia wnętrz"],
  "serviceArea": {
    "@type": "GeoCircle",
    "geoMidpoint": {
      "@type": "GeoCoordinates",
      "latitude": "50.6715",
      "longitude": "18.6965"
    },
    "geoRadius": "50000"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Usługi fotograficzne",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Fotografia nieruchomości Lubliniec",
          "description": "Profesjonalna fotografia nieruchomości - domy, apartamenty, przestrzenie komercyjne"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Fotografia eventowa Lubliniec",
          "description": "Fotografia koncertów, festiwali i wydarzeń w Lublińcu i okolicach"
        }
      }
    ]
  },
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Lubliniec",
    "addressLocality": "Lubliniec",
    "addressRegion": "Śląskie",
    "postalCode": "42-700",
    "addressCountry": "PL"
  },
  "areaServed": [
    {
      "@type": "City",
      "name": "Lubliniec"
    },
    {
      "@type": "State",
      "name": "Województwo Śląskie"
    }
  ],
  "sameAs": [
    "https://www.facebook.com/profile.php?id=100069116356707",
    "https://www.instagram.com/redix.45/"
  ],
  "@graph": [
    {
      "@type": "Person",
      "name": "Jan Kobus",
      "jobTitle": "Fotograf",
      "url": "https://jankobus.com",
      "sameAs": [
        "https://www.facebook.com/profile.php?id=100069116356707",
        "https://www.instagram.com/redix.45/"
      ]
    }
  ]
};

const additionalHead = `
<script>
    function tryNextExtension(img) {
        const extensions = ['png', 'webp', 'jpeg', 'JPG', 'PNG'];
        const currentSrc = img.src;
        const currentExt = currentSrc.split('.').pop();
        const nextIndex = extensions.indexOf(currentExt) + 1;

        if (nextIndex < extensions.length) {
            img.src = currentSrc.replace(\`.\${currentExt}\`, \`.\${extensions[nextIndex]}\`);
        } else {
            img.style.display = 'none';
            console.warn("Nie znaleziono zdjęcia profilowego w obsługiwanych formatach.");
        }
    }
</script>
`;
---

<BaseLayout
    title="Fotografia Lubliniec | Jan Kobus - Fotografia Nieruchomości Lubliniec"
    description="Fotografia Lubliniec ⭐ Profesjonalna fotografia nieruchomości Lubliniec - domy, apartamenty, wnętrza. Fotograf Lubliniec - Jan Kobus. Fotografia eventowa i komercyjna województwo śląskie. ☎️ Zadzwoń!"
    keywords="fotografia lubliniec, fotografia nieruchomości lubliniec, fotograf lubliniec, zdjęcia nieruchomości lubliniec, fotografia wnętrz lubliniec, fotograf nieruchomości śląskie, fotografia eventowa lubliniec, sesja zdjęciowa lubliniec"
    canonical="https://jankobus.com/"
    ogType="website"
    ogImage="https://jankobus.com/photos/operetka/foto%20(2).jpg"
    ogImageWidth="1200"
    ogImageHeight="630"
    twitterCard="summary_large_image"
    structuredData={structuredData}
    preloadImages={["/photos/operetka/foto%20(2).jpg"]}
    geoRegion="PL-SL"
    geoPlacename="Lubliniec"
    geoPosition="50.6715;18.6965"
    additionalHead={additionalHead}
>

    <nav role="navigation" aria-label="Main navigation">
        <div class="nav-left">
            <!-- Linkuje bezpośrednio do id="work" na tej samej stronie -->
            <a href="#work" onclick="document.getElementById('work').scrollIntoView({behavior: 'smooth'}); return false;">Prace</a>
            <a href="/o-mnie">O mnie</a>
            <a href="/kontakt">Kontakt</a>
        </div>
        <div class="nav-center">
            <a href="/" aria-label="Strona główna - Jan Kobus">Jan Kobus</a>
        </div>
        <div class="nav-right">
            <a href="https://www.facebook.com/profile.php?id=100069116356707" target="_blank" rel="noopener noreferrer" aria-label="Odwiedź profil na Facebooku"><i class="fab fa-facebook-f" aria-hidden="true"></i></a>
            <a href="https://www.instagram.com/redix.45/" target="_blank" rel="noopener noreferrer" aria-label="Odwiedź profil na Instagramie">
                <i class="fab fa-instagram" aria-hidden="true"></i>
            </a>
        </div>
    </nav>

    <header class="hero">
        <canvas id="hero-particles"></canvas>
        <div class="hero-glow" id="heroGlow"></div>
        <div class="hero-center">
            <h1>Jan Kobus</h1>
            <p class="subtitle" id="subtitle-typewriter"></p>
        </div>

        <div class="scroll-down" role="button" aria-label="Przewiń do portfolio" tabindex="0">
            <i class="fas fa-chevron-down" aria-hidden="true"></i>
        </div>
    </header>

    <main>
    <section class="main-categories" id="work" aria-label="Portfolio Categories">

        <a href="/events" class="category-tile fade-in-section" aria-label="Zobacz portfolio fotografii eventowej">
            <div class="tile-overlay">
                <h2>Fotografia Eventowa</h2>
                <p>Koncerty • Festiwale • wydarzenia</p>
            </div>
            <picture>
                <source srcset="/photos/operetka/foto (2).webp" type="image/webp">
                <source srcset="/photos/operetka/foto (2).jpg">
                <img src="/photos/operetka/foto (2).jpg" alt="Fotografia eventowa Lubliniec - koncert Cabaret w Operetce fotografowany przez Jana Kobusa fotograf" loading="eager" fetchpriority="high" decoding="async">
            </picture>
        </a>

        <a href="/real_estate" class="category-tile fade-in-section" aria-label="Zobacz portfolio fotografii nieruchomosci">
            <div class="tile-overlay">
                <h2>Fotografia Nieruchomosci</h2>
                <p>Domy • Apartamenty • Komercyjne</p>
            </div>
            <img src="https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=1200&q=80" alt="Fotografia nieruchomosci Lubliniec - profesjonalne zdjecia apartamentu luksusowe nowoczesne wnetrze" loading="eager" fetchpriority="high" decoding="async">
        </a>

    </section>
    </main>

    <footer role="contentinfo">
        <div class="footer-content">
            <p>&copy; 2026 Jan Kobus. Wszelkie prawa zastrzeżone.</p>
            <div class="footer-socials">
                <a href="https://www.facebook.com/profile.php?id=100069116356707" target="_blank" rel="noopener noreferrer" aria-label="Odwiedź profil na Facebooku"><i class="fab fa-facebook-f" aria-hidden="true"></i></a>
                <a href="https://www.instagram.com/redix.45/" target="_blank" rel="noopener noreferrer" aria-label="Odwiedź profil na Instagramie"><i class="fab fa-instagram" aria-hidden="true"></i></a>
            </div>
        </div>
    </footer>

    <script src="/preload-images.js" is:inline></script>
    <script src="/preload-measure.js" is:inline></script>
    <script is:inline>
        document.addEventListener('astro:page-load', () => {
            // Smooth scroll
            const scrollBtn = document.querySelector('.scroll-down');
            if (scrollBtn) {
                scrollBtn.addEventListener('click', function() {
                    document.getElementById('work').scrollIntoView({ behavior: 'smooth' });
                });
            }

            // Hero cursor glow
            const glow = document.getElementById('heroGlow');
            const hero = document.querySelector('.hero');
            if (glow && hero) {
                hero.addEventListener('mousemove', (e) => {
                    glow.style.left = e.clientX + 'px';
                    glow.style.top = e.clientY + 'px';
                    glow.style.opacity = '1';
                });
                hero.addEventListener('mouseleave', () => {
                    glow.style.opacity = '0';
                });
            }

            // Hero parallax on scroll
            const heroCenter = document.querySelector('.hero-center');
            const scrollDown = document.querySelector('.scroll-down');
            if (heroCenter) {
                window.addEventListener('scroll', () => {
                    const y = window.scrollY;
                    if (y < window.innerHeight) {
                        heroCenter.style.transform = `translateY(${y * 0.3}px)`;
                        heroCenter.style.opacity = 1 - (y / (window.innerHeight * 0.8));
                    }
                    if (scrollDown) {
                        scrollDown.style.opacity = Math.max(0, 0.7 - (y / 300));
                    }
                }, { passive: true });
            }

            // 3D tilt on category tiles
            document.querySelectorAll('.category-tile').forEach(tile => {
                tile.addEventListener('mousemove', (e) => {
                    const rect = tile.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / centerY * -4;
                    const rotateY = (x - centerX) / centerX * 4;
                    tile.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                });
                tile.addEventListener('mouseleave', () => {
                    tile.style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
                });
            });

            // Typewriter effect on subtitle
            const subtitleEl = document.getElementById('subtitle-typewriter');
            if (subtitleEl && !subtitleEl.dataset.typed) {
                subtitleEl.dataset.typed = '1';
                const text = 'Portfolio Fotograficzne';
                subtitleEl.textContent = '';
                let i = 0;
                const cursor = document.createElement('span');
                cursor.className = 'typewriter-cursor';
                subtitleEl.appendChild(cursor);
                function typeChar() {
                    if (i < text.length) {
                        subtitleEl.insertBefore(document.createTextNode(text[i]), cursor);
                        i++;
                        setTimeout(typeChar, 70 + Math.random() * 40);
                    } else {
                        setTimeout(() => { cursor.style.display = 'none'; }, 2000);
                    }
                }
                setTimeout(typeChar, 1200);
            }

            // Floating particles
            const canvas = document.getElementById('hero-particles');
            if (canvas && !canvas.dataset.init) {
                canvas.dataset.init = '1';
                const ctx = canvas.getContext('2d');
                let particles = [];
                let animId;

                function resize() {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                }
                resize();
                window.addEventListener('resize', resize);

                for (let i = 0; i < 40; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        r: Math.random() * 1.5 + 0.5,
                        dx: (Math.random() - 0.5) * 0.3,
                        dy: (Math.random() - 0.5) * 0.3 - 0.15,
                        opacity: Math.random() * 0.4 + 0.1
                    });
                }

                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    particles.forEach(p => {
                        p.x += p.dx;
                        p.y += p.dy;
                        if (p.x < 0) p.x = canvas.width;
                        if (p.x > canvas.width) p.x = 0;
                        if (p.y < 0) p.y = canvas.height;
                        if (p.y > canvas.height) p.y = 0;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(255, 255, 255, ${p.opacity})`;
                        ctx.fill();
                    });
                    animId = requestAnimationFrame(animate);
                }
                animate();
            }
        });
    </script>

</BaseLayout>
